{"version":3,"sources":["todo-app.js"],"names":["todoArray","createAppTitle","title","document","appTitle","createTodoForm","form","createElement","input","addButton","wrapper","addEventListener","value","length","classList","add","append","createTodoList","list","createTodoItem","todoItem","doneBtn","randomId","name","deleteBtn","textContent","random","obj","btnWrapper","toFixed","changeItemDone","done","arr","item","toggle","id","setItem","JSON","stringify","completeTodoItem","btn","parse","localStorage","filter","getItem","key","deleteTodoItem","container","newList","appForm","appList","createTodoApp","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","remove","err","_iterator","e","preventDefault","localStorageData","itemObj","createItemObj","disabled"],"mappings":"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","file":"todo-app.min.js","sourcesContent":["\r\nlet todoArray = [];\r\n\r\nconst createAppTitle = (title) => {\r\n    const appTitle = document.createElement('h1');\r\n    appTitle.innerHTML = title;\r\n\r\n    return appTitle;\r\n};\r\n\r\nconst createTodoForm = () => {\r\n    const form = document.createElement('form');\r\n    const input = document.createElement('input');\r\n    const addButton = document.createElement('button');\r\n    const wrapper = document.createElement('div');\r\n\r\n    addButton.disabled = !input.value.length;\r\n\r\n    input.addEventListener('input', () => {\r\n        addButton.disabled = !input.value.length;\r\n    })\r\n\r\n    form.classList.add('input-group', 'mb-3');\r\n    input.classList.add('form-control');\r\n    input.placeholder = 'Введите название дела';\r\n    addButton.classList.add('btn', 'btn-primary');\r\n    wrapper.classList.add('input-group-append');\r\n    addButton.textContent = 'Добавить дело';\r\n\r\n    wrapper.append(addButton);\r\n    form.append(input);\r\n    form.append(wrapper);\r\n\r\n    return {\r\n        form,\r\n        input,\r\n        addButton\r\n    };\r\n};\r\n\r\nconst createTodoList = () => {\r\n    const list = document.createElement('ul');\r\n    list.classList.add('list-group');\r\n\r\n    return list;\r\n};\r\n\r\nconst createTodoItem = (name) => {\r\n    const todoItem = document.createElement('li');\r\n    const btnWrapper = document.createElement('div');\r\n    const doneBtn = document.createElement('button');\r\n    const deleteBtn = document.createElement('button');\r\n\r\n    const randomId = Math.random() * 15.75;\r\n    todoItem.id = randomId.toFixed(2);\r\n\r\n    todoItem.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-item-center');\r\n    doneBtn.classList.add('btn', 'btn-success');\r\n    deleteBtn.classList.add('btn', 'btn-danger');\r\n    todoItem.textContent = name;\r\n    doneBtn.textContent = 'Готово';\r\n    deleteBtn.textContent = 'Удалить';\r\n\r\n    btnWrapper.append(doneBtn, deleteBtn);\r\n    todoItem.append(btnWrapper);\r\n    \r\n\r\n    return {\r\n        todoItem,\r\n        doneBtn,\r\n        deleteBtn,\r\n        btnWrapper\r\n    };\r\n};\r\n\r\nconst changeItemDone = (arr, item) => {\r\n    arr.map(obj => {\r\n        if(obj.id === item.id & obj.done === false) {\r\n            obj.done = true;\r\n        } else if (obj.id === item.id & obj.done === true) {\r\n            obj.done = false;\r\n        }\r\n    });\r\n}\r\n\r\nconst completeTodoItem = (item, btn) => {\r\n    btn.addEventListener('click', () => {\r\n        todoArray = JSON.parse(localStorage.getItem(key));\r\n        item.classList.toggle('list-group-item-success');\r\n        changeItemDone(todoArray, item);\r\n\r\n        localStorage.setItem(key, JSON.stringify(todoArray));\r\n    })\r\n};\r\n\r\nconst deleteTodoItem = (item, btn) => {\r\n    btn.addEventListener('click', () => {\r\n        if(confirm('Вы уверены?')) {\r\n            todoArray = JSON.parse(localStorage.getItem(key));\r\n\r\n            const newList = todoArray.filter(obj => obj.id !== item.id);\r\n\r\n            localStorage.setItem(key, JSON.stringify(newList));\r\n            item.remove();\r\n        }\r\n    })\r\n};\r\n\r\nfunction createTodoApp(container, title, key) {\r\n    const appTitle = createAppTitle(title);\r\n    const appForm = createTodoForm();\r\n    const appList = createTodoList();\r\n\r\n    container.append(appTitle, appForm.form, appList);\r\n\r\n    if(localStorage.getItem(key)) {\r\n        todoArray = JSON.parse(localStorage.getItem(key))\r\n\r\n        for(const obj of todoArray) {\r\n            const todoItem = createTodoItem(appForm.input.value);\r\n\r\n            todoItem.todoItem.textContent = obj.name;\r\n            todoItem.todoItem.id = obj.id;\r\n\r\n            if(obj.done == true) {\r\n                todoItem.todoItem.classList.add('list-group-item-success');\r\n            } else {\r\n                todoItem.todoItem.classList.remove('list-group-item-success');\r\n            }\r\n\r\n            completeTodoItem(todoItem.todoItem, todoItem.doneBtn);\r\n            deleteTodoItem(todoItem.todoItem, todoItem.deleteBtn);\r\n\r\n            appList.append(todoItem.todoItem);\r\n            todoItem.todoItem.append(todoItem.btnWrapper);\r\n        }\r\n    }\r\n\r\n    appForm.form.addEventListener('submit', e => {\r\n        e.preventDefault();\r\n\r\n        const todoItem = createTodoItem(appForm.input.value);\r\n\r\n        if(!appForm.input.value) {\r\n            return;\r\n        }\r\n\r\n        completeTodoItem(todoItem.todoItem, todoItem.doneBtn);\r\n        deleteTodoItem(todoItem.todoItem, todoItem.deleteBtn);\r\n\r\n        let localStorageData = localStorage.getItem(key);\r\n\r\n        if(localStorageData == null) {\r\n            todoArray = [];\r\n        } else {\r\n            todoArray =JSON.parse(localStorageData);\r\n        }\r\n\r\n        const createItemObj = (arr) => {\r\n            const itemObj = {};\r\n            itemObj.name = appForm.input.value;\r\n            itemObj.id = todoItem.todoItem.id;\r\n            itemObj.done = false;\r\n\r\n            arr.push(itemObj);\r\n        }\r\n        createItemObj(todoArray);\r\n        localStorage.setItem(key, JSON.stringify(todoArray));\r\n\r\n        appList.append(todoItem.todoItem);\r\n        appForm.input.value = '';\r\n        appForm.addButton.disabled = !appForm.addButton.disabled;\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}