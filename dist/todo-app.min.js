"use strict";var todoArray=[],createAppTitle=function(t){var e=document.createElement("h1");return e.innerHTML=t,e},createTodoForm=function(){var t=document.createElement("form"),e=document.createElement("input"),o=document.createElement("button"),n=document.createElement("div");return o.disabled=!e.value.length,e.addEventListener("input",function(){o.disabled=!e.value.length}),t.classList.add("input-group","mb-3"),e.classList.add("form-control"),e.placeholder="Введите название дела",o.classList.add("btn","btn-primary"),n.classList.add("input-group-append"),o.textContent="Добавить дело",n.append(o),t.append(e),t.append(n),{form:t,input:e,addButton:o}},createTodoList=function(){var t=document.createElement("ul");return t.classList.add("list-group"),t},createTodoItem=function(t){var e=document.createElement("li"),o=document.createElement("div"),n=document.createElement("button"),d=document.createElement("button"),a=15.75*Math.random();return e.id=a.toFixed(2),e.classList.add("list-group-item","d-flex","justify-content-between","align-item-center"),n.classList.add("btn","btn-success"),d.classList.add("btn","btn-danger"),e.textContent=t,n.textContent="Готово",d.textContent="Удалить",o.append(n,d),e.append(o),{todoItem:e,doneBtn:n,deleteBtn:d,btnWrapper:o}},changeItemDone=function(t,e){t.map(function(t){t.id===e.id&!1===t.done?t.done=!0:t.id===e.id&!0===t.done&&(t.done=!1)})},completeTodoItem=function(t,e){e.addEventListener("click",function(){todoArray=JSON.parse(localStorage.getItem(key)),t.classList.toggle("list-group-item-success"),changeItemDone(todoArray,t),localStorage.setItem(key,JSON.stringify(todoArray))})},deleteTodoItem=function(e,t){t.addEventListener("click",function(){if(confirm("Вы уверены?")){var t=(todoArray=JSON.parse(localStorage.getItem(key))).filter(function(t){return t.id!==e.id});localStorage.setItem(key,JSON.stringify(t)),e.remove()}})};function createTodoApp(t,e,a){var o=createAppTitle(e),r=createTodoForm(),i=createTodoList();if(t.append(o,r.form,i),localStorage.getItem(a)){todoArray=JSON.parse(localStorage.getItem(a));var n=!0,d=!1,c=void 0;try{for(var l,m=todoArray[Symbol.iterator]();!(n=(l=m.next()).done);n=!0){var s=l.value,u=createTodoItem(r.input.value);u.todoItem.textContent=s.name,u.todoItem.id=s.id,1==s.done?u.todoItem.classList.add("list-group-item-success"):u.todoItem.classList.remove("list-group-item-success"),completeTodoItem(u.todoItem,u.doneBtn),deleteTodoItem(u.todoItem,u.deleteBtn),i.append(u.todoItem),u.todoItem.append(u.btnWrapper)}}catch(t){d=!0,c=t}finally{try{n||null==m.return||m.return()}finally{if(d)throw c}}}r.form.addEventListener("submit",function(t){t.preventDefault();var e=createTodoItem(r.input.value);if(r.input.value){completeTodoItem(e.todoItem,e.doneBtn),deleteTodoItem(e.todoItem,e.deleteBtn);var o=localStorage.getItem(a);todoArray=null==o?[]:JSON.parse(o);var n,d;n=todoArray,(d={}).name=r.input.value,d.id=e.todoItem.id,d.done=!1,n.push(d),localStorage.setItem(a,JSON.stringify(todoArray)),i.append(e.todoItem),r.input.value="",r.addButton.disabled=!r.addButton.disabled}})}
//# sourceMappingURL=todo-app.min.js.map
